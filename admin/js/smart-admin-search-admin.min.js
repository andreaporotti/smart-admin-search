!function(e){"use strict";e.fn.sasSelect2=e.fn.select2,"undefined"!=typeof currentSelect2&&null!==currentSelect2&&(e.fn.select2=currentSelect2),e((function(){let t=e(document),s=e("body"),n=e(".sas-search-modal"),l=e(".sas-search-modal__close"),a=e(".sas-search-modal__select"),c=e("#wp-admin-bar-sas_icon");c.on("mousedown",(function(){d()})),c.on("click",(function(e){e.preventDefault()}));let r=sas_values.options.search_keys_shortcut.sort().map(Number),i=[];function o(t){if(t.loading)return t.text;let s="";return void 0!==t.preview&&null!==t.preview&&""!==t.preview&&(s=`\n\t\t\t\t\t<div class="sas-search-result__preview">\n\t\t\t\t\t\t${t.preview}\n\t\t\t\t\t</div>\n\t\t\t\t`),e(`\n\t\t\t\t<div class="sas-search-result">\n\t\t\t\t\t<div class="sas-search-result__icon wp-menu-image dashicons-before ${t.icon_class}" style="${t.style}"></div>\n\t\t\t\t\t<div class="sas-search-result__info">\n\t\t\t\t\t\t<div class="sas-search-result__name">${t.text}</div>\n\t\t\t\t\t\t<div class="sas-search-result__description">${t.description}</div>\n\t\t\t\t\t\t<div class="sas-search-result__link-url">${t.link_url}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${s}\n\t\t\t\t</div>\n\t\t\t\t`)}function u(e){return""===e.id?sas_values.strings.search_select_placeholder:e.text}function d(){n.addClass("sas-search-modal--opened"),s.addClass("prevent-scroll"),a.sasSelect2({dropdownParent:n,width:"100%",placeholder:sas_values.strings.search_select_placeholder,minimumInputLength:3,allowClear:!0,templateResult:o,templateSelection:u,ajax:{method:"GET",url:sas_values.ajax.search_url,delay:400,beforeSend:function(e){e.setRequestHeader("X-WP-NONCE",sas_values.ajax.nonce)},data:function(e){return{query:e.term}},processResults:function(e){return{results:e}}}}),setTimeout((function(){a.sasSelect2("open")}),300)}function h(){a.hasClass("select2-hidden-accessible")&&(n.removeClass("sas-search-modal--opened"),s.removeClass("prevent-scroll"),a.sasSelect2("destroy"),a.empty())}t.on("keydown",(function(t){e(t.srcElement).hasClass("sas-skip-global-keypress")||(!1===i.includes(t.which)&&i.push(t.which),JSON.stringify(i.sort())===JSON.stringify(r)?d():i.includes(27)&&h())})),t.on("keyup",(function(t){e(t.srcElement).hasClass("sas-skip-global-keypress")||(i=[])})),n.on("click",(function(e){e.target===this&&h()})),l.on("click",(function(e){e.target===this&&h()})),a.on("select2:select",(function(e){let t=e.params.data;null!==t.link_url&&""!==t.link_url&&(window.location.href=t.link_url)})),a.on("select2:open",(function(){document.querySelector(".sas-search-modal--opened .select2-search__field").focus()}))}))}(jQuery);