!function(e){"use strict";e.fn.sasSelect2=e.fn.select2,"undefined"!=typeof currentSelect2&&null!==currentSelect2&&(e.fn.select2=currentSelect2),e((function(){let s=e(document),t=e("body"),n=e(".sas-search-modal"),l=e(".sas-search-modal__close"),a=e(".sas-search-modal__select"),c=e("#wp-admin-bar-sas_icon");c.on("mousedown",(function(){d()})),c.on("click",(function(e){e.preventDefault()}));let r=sas_values.options.search_keys_shortcut.sort().map(Number),o=[];function i(s){if(s.loading)return s.text;return e(`\n\t\t\t\t<div class="sas-search-result">\n\t\t\t\t\t<div class="sas-search-result__icon wp-menu-image dashicons-before ${s.icon_class}" style="${s.style}"></div>\n\t\t\t\t\t<div class="sas-search-result__info">\n\t\t\t\t\t\t<div class="sas-search-result__name">${s.text}</div>\n\t\t\t\t\t\t<div class="sas-search-result__description">${s.description}</div>\n\t\t\t\t\t\t<div class="sas-search-result__link-url">${s.link_url}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t`)}function u(e){return""===e.id?sas_values.strings.search_select_placeholder:e.text}function d(){n.addClass("sas-search-modal--opened"),t.addClass("prevent-scroll"),a.sasSelect2({dropdownParent:n,width:"100%",placeholder:sas_values.strings.search_select_placeholder,minimumInputLength:3,allowClear:!0,templateResult:i,templateSelection:u,ajax:{method:"GET",url:sas_values.ajax.search_url,delay:400,beforeSend:function(e){e.setRequestHeader("X-WP-NONCE",sas_values.ajax.nonce)},data:function(e){return{query:e.term}},processResults:function(e){return{results:e}}}}),setTimeout((function(){a.sasSelect2("open")}),300)}function h(){a.hasClass("select2-hidden-accessible")&&(n.removeClass("sas-search-modal--opened"),t.removeClass("prevent-scroll"),a.sasSelect2("destroy"),a.empty())}s.on("keydown",(function(s){e(s.srcElement).hasClass("sas-skip-global-keypress")||(!1===o.includes(s.which)&&o.push(s.which),JSON.stringify(o.sort())===JSON.stringify(r)?d():o.includes(27)&&h())})),s.on("keyup",(function(s){e(s.srcElement).hasClass("sas-skip-global-keypress")||(o=[])})),n.on("click",(function(e){e.target===this&&h()})),l.on("click",(function(e){e.target===this&&h()})),a.on("select2:select",(function(e){let s=e.params.data;null!==s.link_url&&""!==s.link_url&&(window.location.href=s.link_url)})),a.on("select2:open",(function(){document.querySelector(".select2-search__field").focus()}))}))}(jQuery);